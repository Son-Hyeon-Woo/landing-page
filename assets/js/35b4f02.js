(window.webpackJsonp=window.webpackJsonp||[]).push([[408],{1851:function(t,e,n){},1852:function(t,e,n){},2623:function(t,e,n){"use strict";n(1851)},2624:function(t,e,n){"use strict";n(1852)},3059:function(t,e,n){"use strict";n.r(e);var o=n(2),i=n(3),a=n(12),r=n(8),c=n(4),l=n(9),u=(n(41),n(29),n(33),n(15),n(49),n(28),n(84),n(30),n(368),n(22),n(34)),d=n(816),s=n(837),p=n(78),f=n(10);function _callSuper(t,e,n){return e=Object(r.a)(e),Object(a.a)(t,_isNativeReflectConstruct()?Reflect.construct(e,n||[],Object(r.a)(t).constructor):e.apply(t,n))}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t})()}var v,__decorate=function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===("undefined"==typeof Reflect?"undefined":Object(l.a)(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},__metadata=function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":Object(l.a)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},b=function(t){function NextAppButtonComponent(){var t;return Object(o.a)(this,NextAppButtonComponent),(t=_callSuper(this,NextAppButtonComponent,arguments)).appHistoryStore=Object(p.b)(t.$pinia),t.isDoubleClicked=!1,t.isTextEdited=!1,t}return Object(c.a)(NextAppButtonComponent,t),Object(i.a)(NextAppButtonComponent,[{key:"isEditing",get:function get(){return this.isDoubleClicked}},{key:"htmlText",get:function get(){try{var t=this.data.text;return t=t.replace(/\n/gi,"<br/>")}catch(t){return this.data.text}},set:function set(t){this.appEditStore.setData({target:this.data,key:"text",value:t}),this.isTextEdited=!0}},{key:"isParentFocused",get:function get(){var t,e,n,o;if(this.version!==this.VERSION_NEXT)return!0;var i=null===(n=null===(e=(t=this.parents).slice)||void 0===e?void 0:e.call(t,-2))||void 0===n?void 0:n[0];return(null==i?void 0:i.type)===f.a.AppBlock&&(null===(o=null==i?void 0:i.metadata)||void 0===o?void 0:o.isFocused)}},{key:"watchIsParentFocused",value:function watchIsParentFocused(t,e){!1===t&&!0===e&&this.onElementBlur()}},{key:"onClick",value:function onClick(t){this.editable||this.click(this.data)}},{key:"onElementDoubleClick",value:function onElementDoubleClick(t){var e=this.data.childs.length>0;this.data.metadata.isActivated&&!e&&(this.isDoubleClicked=!0,(null==t?void 0:t.stopPropagation)&&(null==t||t.stopPropagation()))}},{key:"onElementMouseDown",value:function onElementMouseDown(t){(null==t?void 0:t.stopPropagation)&&(null==t||t.stopPropagation())}},{key:"onElementBlur",value:function onElementBlur(){this.editable&&(this.isDoubleClicked=!1,this.isTextEdited&&(this.appHistoryStore.endSaveHistory(),this.isTextEdited=!1))}},{key:"gaSendEventByEvent",value:function gaSendEventByEvent(t){if(null!=t.action){var e=this.$route.params,n=e.appId,o=(e.pageId,"".concat(n,"_").concat(t.action));this.$log(o)}}}])}(Object(u.mixins)(u.Vue,d.a,s.a,s.b));__decorate([Object(u.Prop)({required:!0}),__metadata("design:type","function"==typeof(v="undefined"!=typeof AppButton&&AppButton)?v:Object)],b.prototype,"data",void 0),__decorate([Object(u.Prop)({default:function _default(){return[]}}),__metadata("design:type",Array)],b.prototype,"parents",void 0),__decorate([Object(u.Prop)({required:!0}),__metadata("design:type",Boolean)],b.prototype,"editable",void 0),__decorate([Object(u.Prop)({required:!0,default:!1}),__metadata("design:type",Boolean)],b.prototype,"isClickMap",void 0),__decorate([Object(u.Watch)("isParentFocused"),__metadata("design:type",Function),__metadata("design:paramtypes",[Boolean,Boolean]),__metadata("design:returntype",void 0)],b.prototype,"watchIsParentFocused",null);var y=b=__decorate([Object(u.Component)({components:{LazyAppElement:function LazyAppElement(){return n.e(16).then(n.bind(null,2678))},LazyEditableText:function LazyEditableText(){return n.e(74).then(n.bind(null,3096))}}})],b),m=(n(2623),n(2624),n(64)),h=Object(m.a)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("LazyAppElement",{staticClass:"AppButton d-flex justify-content-center align-items-center",class:[!t.editable&&"clickable",t.isChildActivated&&"child-active"],attrs:{data:t.data,editable:t.editable,parents:t.parents,isClickMap:t.isClickMap,draggable:t.isParentFocused&&!t.isEditing,resizable:t.isParentFocused&&!t.isEditing,hoverable:t.isParentFocused&&!t.isEditing,droppable:!0,"propagation-event":t.isEditing},on:{mousedown:t.onElementMouseDown,dblclick:t.onElementDoubleClick,deactivated:t.onElementBlur,dragging:t.onElementBlur}},[t.editable?n("div",[n("LazyEditableText",{staticClass:"w-100 h-100",attrs:{editing:t.isEditing},model:{value:t.htmlText,callback:function(e){t.htmlText=e},expression:"htmlText"}}),t._v(" "),t._t("default")],2):[n("div",{staticClass:"AppButtonContent",on:{click:t.onClick}},[t.data.text?n("div",{domProps:{innerHTML:t._s(t.htmlText)}}):t._e(),t._v(" "),t._t("default")],2)]],2)}),[],!1,null,"449871af",null);e.default=h.exports},837:function(t,e,n){"use strict";n.d(e,"a",(function(){return m})),n.d(e,"d",(function(){return h})),n.d(e,"b",(function(){return O})),n.d(e,"c",(function(){return E}));var o=n(2),i=n(3),a=n(12),r=n(8),c=n(4),l=n(9),u=(n(57),n(20),n(33),n(15),n(30),n(368),n(34)),d=n(838),s=n(36),p=n(228),f=n(13),v=n(85);function _callSuper(t,e,n){return e=Object(r.a)(e),Object(a.a)(t,_isNativeReflectConstruct()?Reflect.construct(e,n||[],Object(r.a)(t).constructor):e.apply(t,n))}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t})()}var b,y,__decorate=function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===("undefined"==typeof Reflect?"undefined":Object(l.a)(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},__metadata=function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":Object(l.a)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},m=function(t){function MixinEditorVersion(){var t;return Object(o.a)(this,MixinEditorVersion),(t=_callSuper(this,MixinEditorVersion,arguments)).appEditStore=Object(v.default)(t.$pinia),t.VERSION_V1="v1",t.VERSION_NEXT="next",t.VERSION_POPUP="popup",t}return Object(c.a)(MixinEditorVersion,t),Object(i.a)(MixinEditorVersion,[{key:"fetch",value:function fetch(){this.version=this.appEditStore.appEditorVersion}}])}(u.Vue);m=__decorate([u.Component],m);var h=function getVersionConditionalComponent(t){var e=t.versions,n=t.name;return u.Vue.extend({name:n,mixins:[d.a,m],computed:{componentName:function componentName(){var t=this,n=null==t?void 0:t.version;return n===t.VERSION_NEXT?e.next:n===t.VERSION_POPUP?e.popup:(t.VERSION_V1,e.v1)}}})},O=function(t){function MixinGroupElement(){var t;return Object(o.a)(this,MixinGroupElement),(t=_callSuper(this,MixinGroupElement,arguments)).appEditStore=Object(v.default)(t.$pinia),t.isChildActivated=!1,t}return Object(c.a)(MixinGroupElement,t),Object(i.a)(MixinGroupElement,[{key:"activatedIds",get:function get(){return this.appEditStore.activated.map((function(t){var e;return null===(e=t.element)||void 0===e?void 0:e.id}))}},{key:"watchActivatedIds",value:function watchActivatedIds(t){var e=this,n=t.some((function(t){return e.data.id!==t&&!!Object(f.g)(e.data,t)}));this.isChildActivated=n}}])}(u.Vue);__decorate([Object(u.Prop)({required:!0}),__metadata("design:type","function"==typeof(b=void 0!==s.default&&s.default)?b:Object)],O.prototype,"data",void 0),__decorate([Object(u.Prop)({default:function _default(){return[]}}),__metadata("design:type",Array)],O.prototype,"parents",void 0),__decorate([Object(u.Prop)({type:Boolean,default:!1}),__metadata("design:type",Boolean)],O.prototype,"editable",void 0),__decorate([Object(u.Watch)("activatedIds",{deep:!0,immediate:!0}),__metadata("design:type",Function),__metadata("design:paramtypes",[Array]),__metadata("design:returntype",void 0)],O.prototype,"watchActivatedIds",null),O=__decorate([u.Component],O);var E=function(t){function MixinReloadableElement(){var t;return Object(o.a)(this,MixinReloadableElement),(t=_callSuper(this,MixinReloadableElement,arguments)).appEditStore=Object(v.default)(t.$pinia),t}return Object(c.a)(MixinReloadableElement,t),Object(i.a)(MixinReloadableElement,[{key:"watchReload",value:function watchReload(){var t=this;this.appEditStore.isViewer&&this.$watch((function(){return t.data.metadata.updateComponent}),(function(e,n){if(null!=e){var o=e.key,i=e.value;"reload"===o&&(t.reload(i),t.appEditStore.setMetaData({target:t.data.metadata,key:"updateComponent",value:null,override:!1}))}}))}},{key:"reload",value:function reload(){console.log("reload is called")}}])}(u.Vue);__decorate([Object(u.Prop)({required:!0}),__metadata("design:type","function"==typeof(y=void 0!==s.default&&s.default)?y:Object)],E.prototype,"data",void 0),E=__decorate([u.Component],E);var j=function(t){function MixinProxyableElement(){var t;return Object(o.a)(this,MixinProxyableElement),(t=_callSuper(this,MixinProxyableElement,arguments)).proxy=null,t}return Object(c.a)(MixinProxyableElement,t),Object(i.a)(MixinProxyableElement,[{key:"mounted",value:function mounted(){this.proxy=Object(p.createElementProxy)(this,this.data),console.log("".concat(Object(f.p)(this.data),".proxy"),this.proxy)}}])}(u.Vue);__decorate([Object(u.Prop)({required:!0}),__metadata("design:type",Boolean)],j.prototype,"data",void 0),j=__decorate([u.Component],j)},838:function(t,e,n){"use strict";var o=n(3),i=n(2),a=n(12),r=n(8),c=n(4),l=n(9),u=(n(33),n(15),n(30),n(34));function _callSuper(t,e,n){return e=Object(r.a)(e),Object(a.a)(t,_isNativeReflectConstruct()?Reflect.construct(e,n||[],Object(r.a)(t).constructor):e.apply(t,n))}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t})()}var __decorate=function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===("undefined"==typeof Reflect?"undefined":Object(l.a)(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},d=function(t){function AbstractVersionConditionalComponent(){return Object(i.a)(this,AbstractVersionConditionalComponent),_callSuper(this,AbstractVersionConditionalComponent,arguments)}return Object(c.a)(AbstractVersionConditionalComponent,t),Object(o.a)(AbstractVersionConditionalComponent)}(u.Vue),s=d=__decorate([u.Component],d),p=n(64),f=Object(p.a)(s,(function(){var t=this,e=t.$createElement;return(t._self._c||e)(t.componentName,t._g(t._b({ref:"component",tag:"component",scopedSlots:t._u([t._l(t.$scopedSlots,(function(e,n){return{key:n,fn:function(e){return[t._t(n,null,null,e)]}}}))],null,!0)},"component",Object.assign({},t.$attrs,t.$props),!1),t.$listeners))}),[],!1,null,null,null);e.a=f.exports}}]);